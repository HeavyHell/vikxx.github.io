<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<title>Вся MAPALA на карте</title>
<link rel="apple-touch-icon" sizes="180x180" href="/mapala/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/mapala/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/mapala/favicon-16x16.png">
<link rel="manifest" href="/mapala/manifest.json">
<link rel="mask-icon" href="/mapala/safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">
<link href="https://fonts.googleapis.com/css?family=Comfortaa" rel="stylesheet">
<style>
#side,#side .item{position:absolute}body{margin:0;padding:0;font-family:Comfortaa,cursive;color:#333}#side::-webkit-scrollbar{width:.5em;height:.5em}#side::-webkit-scrollbar-button{background:#ccc}#side::-webkit-scrollbar-track-piece{background:#888}#side::-webkit-scrollbar-thumb{background:#eee}#side{width:30%;left:0;top:0;padding:0;height:100%;overflow:auto}#side .item{background:#fff;padding:15px;box-shadow:0 5px 20px -5px #000;margin:20px;border-radius:3px;font-size:9pt;overflow:hidden;transition:1s all ease;transform:translate3d(0,-100px,0);opacity:0}#side .item.anim{transform:translate3d(0,0,0);opacity:1;transition:1s all ease;position:relative}.item img{display:block;width:100%;max-width:100%;height:auto}#map{display:inline-block;width:100%;height:100%}section{width:100%
display:block;height:100vh;overflow:hidden;margin:0;padding:0}header { padding: 10px; text-align: right; background: #4ba1f1; color: white; font-size: 10px;}</style>
<script>var indexPage=false,isBlog=false;</script>
<script src="https://chain.cf/scripts/blog.js"></script>
<script  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDaKws1vkLkuxRcvJpYuMfB2drqX8VBoMI"></script>
</head>
  <body>
   <section>
   <header>Вся <b>MAPALA</b> на одной карте! <a href="https://golos.io/@vik">@vik</a></header>
   <div id="map"></div>
   <div id="side">
    Загружаются все посты с маркерами...
   </div>
   <section>
  
<script>
"use strict";function itemShow(){setTimeout(function(){document.querySelector(".item").classList.add("anim")},200)}var index=0,$main_color="#2d313f",$saturation=-30,$brightness=2,map=new google.maps.Map(document.getElementById("map"),{zoom:3,center:new google.maps.LatLng(50.0593325,14.1854451),panControl:!1,mapTypeControl:!1,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1,styles:[{elementType:"labels",stylers:[{saturation:$saturation}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry.fill",stylers:[{hue:$main_color},{visibility:"on"},{lightness:$brightness},{saturation:$saturation}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{hue:$main_color},{visibility:"on"},{lightness:$brightness},{saturation:$saturation}]},{featureType:"poi.government",elementType:"geometry.fill",stylers:[{hue:$main_color},{visibility:"on"},{lightness:$brightness},{saturation:$saturation}]},{featureType:"poi.sport_complex",elementType:"geometry.fill",stylers:[{hue:$main_color},{visibility:"on"},{lightness:$brightness},{saturation:$saturation}]},{featureType:"poi.attraction",elementType:"geometry.fill",stylers:[{hue:$main_color},{visibility:"on"},{lightness:$brightness},{saturation:$saturation}]},{featureType:"poi.business",elementType:"geometry.fill",stylers:[{hue:$main_color},{visibility:"on"},{lightness:$brightness},{saturation:$saturation}]},{featureType:"transit",elementType:"geometry.fill",stylers:[{hue:$main_color},{visibility:"on"},{lightness:$brightness},{saturation:$saturation}]},{featureType:"transit.station",elementType:"geometry.fill",stylers:[{hue:$main_color},{visibility:"on"},{lightness:$brightness},{saturation:$saturation}]},{featureType:"landscape",stylers:[{hue:$main_color},{visibility:"on"},{lightness:$brightness},{saturation:$saturation}]},{featureType:"road",elementType:"geometry.fill",stylers:[{hue:$main_color},{visibility:"on"},{lightness:$brightness},{saturation:$saturation}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{hue:$main_color},{visibility:"on"},{lightness:$brightness},{saturation:$saturation}]},{featureType:"water",elementType:"geometry",stylers:[{hue:$main_color},{visibility:"on"},{lightness:$brightness},{saturation:$saturation}]}]}),infowindow=new google.maps.InfoWindow({maxWidth:160}),locat=[],POSTCOUNT=0,item=[],LATEST_POSTS=new Promise(function(e,t){steem.api.getDiscussionsByCreated({select_tags:["mapala"],limit:100},function(i,a){i?t(i):e(a)})}),NEXT_POSTS=function e(t){steem.api.getDiscussionsByCreated({start_permlink:t.start_permlink,start_author:t.start_author,select_tags:["mapala"],limit:100},function(i,a){i&&console.log(i);var n=a.length,o=0,s=!0,r=!1,l=void 0;try{for(var p,u=a[Symbol.iterator]();!(s=(p=u.next()).done);s=!0){var m=p.value,y=JSON.parse(m.json_metadata);if("undefined"!=typeof y.coordinates&&y.coordinates.length>10){var g=new Array,h="http://i.imgur.com/IyCw18s.png",c=y.coordinates,f=c.substring(0,c.indexOf(",")),d=c.substring(c.indexOf(",")).substring(1),T="undefined"==typeof y.image?h:y.image[0],b="<h4>"+m.title+"</h4><p>"+y.location+"</p><h3>"+m.total_payout_value+"/"+m.total_pending_payout_value+'</h3><img style="width:100%;height:auto;" src="'+T+'"/><p><p><a href="https://mapala.net/'+m.author+"/"+m.permlink+'">Читать на MAPALA</a></p>'+m.body.replace(/<\/?[^>]+(>|$)/g,"").slice(0,100)+"</p>",_='<div class="item"><b>'+m.title+"</b><p>"+y.location+"</p><h3>"+m.total_pending_payout_value+"/"+m.total_payout_value+'</h3><img width="200" src="'+T+'"/> <p><a href="https://mapala.net/'+m.author+"/"+m.permlink+'">Читать на MAPALA</a></p><p>'+m.body.replace(/<\/?[^>]+(>|$)/g,"").slice(0,100)+"</p></div>",v=new google.maps.Marker({position:new google.maps.LatLng(f,d),map:map,icon:"https://chain.cf/img/mapalamarker.png"});console.log(c),google.maps.event.addListener(v,"click",function(e){return function(){infowindow.setContent(b),infowindow.open(map,e)}}(v)),document.getElementById("side").insertAdjacentHTML("afterbegin",_),g.push(v),itemShow(),index++}o==n-1&&(t.start_permlink=m.permlink,t.start_author=m.author,n>1&&e(t)),o++}}catch(i){r=!0,l=i}finally{try{!s&&u["return"]&&u["return"]()}finally{if(r)throw l}}})},POSTS_FILTER=function(e){var t={start_permlink:"",start_author:""},i=e.length,a=0,n=!0,o=!1,s=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var p=r.value,u=JSON.parse(p.json_metadata);if("undefined"!=typeof u.coordinates&&u.coordinates.length>10){var m=new Array,y="http://i.imgur.com/IyCw18s.png",g=u.coordinates,h=g.substring(0,g.indexOf(",")),c=g.substring(g.indexOf(",")).substring(1),f="undefined"==typeof u.image?y:u.image[0],d="<h4>"+p.title+"</h4><p>"+u.location+"</p><h3>"+p.total_payout_value+"/"+p.total_pending_payout_value+'</h3><img style="width:100%;height:auto;" src="'+f+'"/><p><p><a href="https://mapala.net/'+p.author+"/"+p.permlink+'">Читать на MAPALA</a></p>'+p.body.replace(/<\/?[^>]+(>|$)/g,"").slice(0,100)+"</p>",T='<div class="item"><b>'+p.title+"</b><p>"+u.location+"</p><h3>"+p.total_pending_payout_value+"/"+p.total_payout_value+'</h3><img width="200" src="'+f+'"/> <p><a href="https://mapala.net/'+p.author+"/"+p.permlink+'">Читать на MAPALA</a></p><p>'+p.body.replace(/<\/?[^>]+(>|$)/g,"").slice(0,100)+"</p></div>",b=new google.maps.Marker({position:new google.maps.LatLng(h,c),map:map,icon:"https://chain.cf/img/mapalamarker.png"});google.maps.event.addListener(b,"click",function(e){return function(){infowindow.setContent(d),infowindow.open(map,e)}}(b)),document.getElementById("side").insertAdjacentHTML("afterbegin",T),m.push(b),itemShow(),index++}a==i-1&&(t.start_permlink=p.permlink,t.start_author=p.author,NEXT_POSTS(t)),a++}}catch(_){o=!0,s=_}finally{try{!n&&l["return"]&&l["return"]()}finally{if(o)throw s}}};LATEST_POSTS.then(POSTS_FILTER)["catch"](function(e){return console.log(e)});</script>
</body>
</html>
